import{s as Ie,l as re,j as ze,G as nt,m as ve,c as Te,q as Ne,u as Ue,v as Ve,w as Ke,x as Je,n as st}from"../chunks/scheduler.DkNbgyf2.js";import{S as De,i as Ge,D as at,u as I,v as z,w as D,r as M,p as x,x as G,s as K,b as J,j as U,d as q,e as rt,c as lt,a as ct,h as ht}from"../chunks/index.B04iSV_w.js";import{T as j,g as Ae,a as Qe,b as $e,f as et,H as ut,w as Me,C as ft}from"../chunks/fragment.oqFrZdx_.js";import{ap as dt,C as he,y as Xe,aq as mt,V as p,O as ke,Q as N,ar as pt,m as tt,j as it,w as gt,as as Y,at as X,A as Ye,au as Oe,H as f,av as we,K as ee,aw as wt,ax as ue,ak as ot,W as _t,ay as yt,az as bt,x as St}from"../chunks/three.module.CvVa4e-M.js";import{d as Pt,w as _e}from"../chunks/index.CLEszH45.js";import{u as vt,P as Ct,O as Mt}from"../chunks/OrbitControls.CZMWyg3J.js";const xt=Number.parseInt(dt.replace("dev","")),Et=`
	varying vec3 worldPosition;
	uniform float uFadeDistance;
	uniform float uInfiniteGrid;
	uniform float uFollowCamera;

	uniform int uCoord0;
	uniform int uCoord1;
	uniform int uCoord2;

	void main() {

		vec3 pos = vec3(position[uCoord0],position[uCoord1],position[uCoord2]) * (1. + uFadeDistance * uInfiniteGrid);

		vec3 cameraFollowOffset = cameraPosition * uFollowCamera;
		pos[uCoord0] += cameraFollowOffset[uCoord0];
		pos[uCoord1] += cameraFollowOffset[uCoord1];

		worldPosition = pos;

		gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
	}
`,Tt=`
	varying vec3 worldPosition;
	uniform float uSize1;
	uniform float uSize2;
	uniform vec3 uColor1;
	uniform vec3 uColor2;
	uniform vec3 uBackgroundColor;
	uniform float uBackgroundOpacity;
	uniform float uFadeDistance;
	uniform float uFadeStrength;
	uniform float uThickness1;
	uniform float uThickness2;
	uniform float uInfiniteGrid;

	uniform int uCoord0;
	uniform int uCoord1;
	uniform int uCoord2;

	// 0 - default; 1 - lines; 2 - circles; 3 - polar
	uniform int uGridType;

  // lineGrid coord for lines
	uniform int uLineGridCoord;

	// circlegrid max radius
	uniform float uCircleGridMaxRadius;

	// polar grid dividers
	uniform float uPolarCellDividers;
	uniform float uPolarSectionDividers;

	const float pi = 3.141592653589793;

	float getSquareGrid(float size, float thickness) {
		vec2 coord = vec2(worldPosition[uCoord0], worldPosition[uCoord1]) / size;

		vec2 grid = abs(fract(coord - 0.5) - 0.5) / fwidth(coord);
		float line = min(grid.x, grid.y) + 1. - thickness;

		return 1.0 - min(line, 1.);
	}

	float getLinesGrid(float size, float thickness) {
		float coord = worldPosition[uLineGridCoord] / size;
		float line = abs(fract(coord - 0.5) - 0.5) / fwidth(coord) - thickness * 0.2;

		return 1.0 - min(line, 1.);
	}

	float getCirclesGrid(float size, float thickness) {
		float coord = length(vec2(worldPosition[uCoord0], worldPosition[uCoord1])) / size;
		float line = abs(fract(coord - 0.5) - 0.5) / fwidth(coord) - thickness * 0.2;

		if(uCircleGridMaxRadius > 0. && coord > uCircleGridMaxRadius + thickness * 0.05) discard;

		return 1.0 - min(line, 1.);
	}

	float getPolarGrid(float size, float thickness, float polarDividers) {

		float rad = length(worldPosition.xz) / size;
		vec2 coord = vec2(rad, atan(worldPosition.x, worldPosition.z) * polarDividers / pi) ;


		vec2 wrapped = vec2(coord.x, fract(coord.y / (2.0 * polarDividers)) * (2.0 * polarDividers));
		vec2 coordWidth = fwidth(coord);
		vec2 wrappedWidth = fwidth(wrapped);
		vec2 width = (coord.y < -polarDividers * 0.5 || coord.y > polarDividers * 0.5 ? wrappedWidth : coordWidth) * (1.+thickness*0.25);

		// Compute anti-aliased world-space grid lines
		vec2 grid = abs(fract(coord - 0.5) - 0.5) / width;
		float line = min(grid.x, grid.y);



		if(uCircleGridMaxRadius > 0. && rad > uCircleGridMaxRadius + thickness * 0.05) discard;

		return 1.0 - min(line, 1.);
	}

	void main() {
		float g1 = 0.;
		float g2 = 0.;

		if(uGridType == 0){
			g1 = getSquareGrid(uSize1, uThickness1);
			g2 = getSquareGrid(uSize2, uThickness2);
		}

		if(uGridType == 1){
			g1 = getLinesGrid(uSize1, uThickness1);
			g2 = getLinesGrid(uSize2, uThickness2);
		}

		if(uGridType==2){
			g1 = getCirclesGrid(uSize1, uThickness1);
			g2 = getCirclesGrid(uSize2, uThickness2);
		}

		if(uGridType==3){
			g1 = getPolarGrid(uSize1, uThickness1, uPolarCellDividers);
			g2 = getPolarGrid(uSize2, uThickness2, uPolarSectionDividers);
		}


		vec3 color = mix(uColor1, uColor2, min(1.,uThickness2*g2));
		float d = 1.0 - min(distance(vec2(cameraPosition[uCoord0],cameraPosition[uCoord1]), vec2(worldPosition[uCoord0],worldPosition[uCoord1])) / uFadeDistance, 1.);
		float fadeFactor =  pow(d,uFadeStrength) * 0.95;

		if(uBackgroundOpacity> 0.0){
			float linesAlpha = clamp((g1 + g2) * fadeFactor, 0.,1.);
			vec3 finalColor = mix(uBackgroundColor, color, linesAlpha);
			float blendedAlpha = max(linesAlpha, uBackgroundOpacity * fadeFactor);
			gl_FragColor = vec4(finalColor, blendedAlpha);
		} else {
			gl_FragColor = vec4(color, (g1 + g2) * pow(d,uFadeStrength));
			gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
		}


		if(gl_FragColor.a <= 0.0) discard;

		#include <tonemapping_fragment>

		#ifdef USE_COLORSPACE_FRAGMENT
			#include <colorspace_fragment>
		#else
			#include <encodings_fragment>
		#endif


	}
`,kt={fragmentShader:Tt,vertexShader:Et},It=r=>({ref:r[0]&1}),He=r=>({ref:r[0]});function zt(r){let e,i;return e=new j.PlaneGeometry({props:{args:typeof r[1]=="number"?[r[1],r[1]]:r[1]}}),{c(){I(e.$$.fragment)},l(o){z(e.$$.fragment,o)},m(o,s){D(e,o,s),i=!0},p(o,s){const a={};s[0]&2&&(a.args=typeof o[1]=="number"?[o[1],o[1]]:o[1]),e.$set(a)},i(o){i||(M(e.$$.fragment,o),i=!0)},o(o){x(e.$$.fragment,o),i=!1},d(o){G(e,o)}}}function Dt(r){let e,i,o;e=new j.ShaderMaterial({props:{fragmentShader:r[4],vertexShader:r[5],uniforms:r[2],transparent:!0,side:Xe,defines:{USE_COLORSPACE_FRAGMENT:xt>=154?"":void 0}}});const s=r[26].default,a=Ue(s,r,r[29],He),t=a||zt(r);return{c(){I(e.$$.fragment),i=K(),t&&t.c()},l(n){z(e.$$.fragment,n),i=J(n),t&&t.l(n)},m(n,h){D(e,n,h),U(n,i,h),t&&t.m(n,h),o=!0},p(n,h){const m={};h[0]&4&&(m.uniforms=n[2]),e.$set(m),a?a.p&&(!o||h[0]&536870913)&&Ve(a,s,n,n[29],o?Je(s,n[29],h,It):Ke(n[29]),He):t&&t.p&&(!o||h[0]&2)&&t.p(n,o?h:[-1,-1])},i(n){o||(M(e.$$.fragment,n),M(t,n),o=!0)},o(n){x(e.$$.fragment,n),x(t,n),o=!1},d(n){n&&q(i),G(e,n),t&&t.d(n)}}}function Gt(r){let e,i,o;const s=[{frustumCulled:!1},r[7]];function a(n){r[28](n)}let t={$$slots:{default:[Dt,({ref:n})=>({0:n}),({ref:n})=>[n?1:0]]},$$scope:{ctx:r}};for(let n=0;n<s.length;n+=1)t=re(t,s[n]);return r[0]!==void 0&&(t.ref=r[0]),e=new j.Mesh({props:t}),r[27](e),ze.push(()=>at(e,"ref",a)),{c(){I(e.$$.fragment)},l(n){z(e.$$.fragment,n)},m(n,h){D(e,n,h),o=!0},p(n,h){const m=h[0]&128?Ae(s,[s[0],Qe(n[7])]):{};h[0]&536870919&&(m.$$scope={dirty:h,ctx:n}),!i&&h[0]&1&&(i=!0,m.ref=n[0],nt(()=>i=!1)),e.$set(m)},i(n){o||(M(e.$$.fragment,n),o=!0)},o(n){x(e.$$.fragment,n),o=!1},d(n){r[27](null),G(e,n)}}}function At(r,e,i){const o=["cellColor","sectionColor","cellSize","backgroundColor","backgroundOpacity","sectionSize","plane","gridSize","followCamera","infiniteGrid","fadeDistance","fadeStrength","cellThickness","sectionThickness","type","axis","maxRadius","cellDividers","sectionDividers","ref"];let s=ve(e,o),a,{$$slots:t={},$$scope:n}=e,{cellColor:h="#000000"}=e,{sectionColor:m="#0000ee"}=e,{cellSize:_=1}=e,{backgroundColor:S="#dadada"}=e,{backgroundOpacity:A=0}=e,{sectionSize:l=10}=e,{plane:g="xz"}=e,{gridSize:E=[20,20]}=e,{followCamera:k=!1}=e,{infiniteGrid:P=!1}=e,{fadeDistance:y=100}=e,{fadeStrength:T=1}=e,{cellThickness:O=1}=e,{sectionThickness:H=2}=e,{type:F="grid"}=e,{axis:V="x"}=e,{maxRadius:W=0}=e,{cellDividers:ie=6}=e,{sectionDividers:oe=2}=e,{ref:R}=e;const{fragmentShader:$,vertexShader:ne}=kt,{invalidate:Z}=$e();let c={uSize1:{value:_},uSize2:{value:l},uColor1:{value:new he(h)},uColor2:{value:new he(m)},uBackgroundColor:{value:new he("#aaaaaa")},uBackgroundOpacity:{value:.7},uFadeDistance:{value:y},uFadeStrength:{value:T},uThickness1:{value:1},uThickness2:{value:1},uInfiniteGrid:{value:P?1:0},uFollowCamera:{value:0},uCoord0:{value:0},uCoord1:{value:2},uCoord2:{value:1},uGridType:{value:0},uLineGridCoord:{value:0},uCircleGridMaxRadius:{value:9},uPolarCellDividers:{value:6},uPolarSectionDividers:{value:2}};const L={x:0,y:1,z:2},d={xz:"xzy",xy:"xyz",zy:"zyx"},v=et();Te(r,v,u=>i(3,a=u));function C(u){ze[u?"unshift":"push"](()=>{a=u,v.set(a)})}function le(u){R=u,i(0,R)}return r.$$set=u=>{e=re(re({},e),Ne(u)),i(7,s=ve(e,o)),"cellColor"in u&&i(8,h=u.cellColor),"sectionColor"in u&&i(9,m=u.sectionColor),"cellSize"in u&&i(10,_=u.cellSize),"backgroundColor"in u&&i(11,S=u.backgroundColor),"backgroundOpacity"in u&&i(12,A=u.backgroundOpacity),"sectionSize"in u&&i(13,l=u.sectionSize),"plane"in u&&i(14,g=u.plane),"gridSize"in u&&i(1,E=u.gridSize),"followCamera"in u&&i(15,k=u.followCamera),"infiniteGrid"in u&&i(16,P=u.infiniteGrid),"fadeDistance"in u&&i(17,y=u.fadeDistance),"fadeStrength"in u&&i(18,T=u.fadeStrength),"cellThickness"in u&&i(19,O=u.cellThickness),"sectionThickness"in u&&i(20,H=u.sectionThickness),"type"in u&&i(21,F=u.type),"axis"in u&&i(22,V=u.axis),"maxRadius"in u&&i(23,W=u.maxRadius),"cellDividers"in u&&i(24,ie=u.cellDividers),"sectionDividers"in u&&i(25,oe=u.sectionDividers),"ref"in u&&i(0,R=u.ref),"$$scope"in u&&i(29,n=u.$$scope)},r.$$.update=()=>{if(r.$$.dirty[0]&67108608){const u=d[g],ce=u.charAt(0),Ce=u.charAt(1),ge=u.charAt(2);i(2,c.uCoord0.value=L[ce],c),i(2,c.uCoord1.value=L[Ce],c),i(2,c.uCoord2.value=L[ge],c),i(2,c.uSize1={value:_},c),i(2,c.uSize2={value:l},c),i(2,c.uColor1={value:new he(h)},c),i(2,c.uColor2={value:new he(m)},c),i(2,c.uBackgroundColor={value:new he(S)},c),i(2,c.uBackgroundOpacity={value:A},c),i(2,c.uFadeDistance={value:y},c),i(2,c.uFadeStrength={value:T},c),i(2,c.uThickness1={value:O},c),i(2,c.uThickness2={value:H},c),i(2,c.uFollowCamera={value:k?1:0},c),i(2,c.uInfiniteGrid={value:P?1:0},c),F=="grid"&&i(2,c.uGridType={value:0},c),F==="lines"&&(i(2,c.uGridType={value:1},c),i(2,c.uLineGridCoord={value:L[V]},c)),F==="circular"&&(i(2,c.uGridType={value:2},c),i(2,c.uCircleGridMaxRadius={value:W||0},c)),F==="polar"&&(i(2,c.uGridType={value:3},c),i(2,c.uCircleGridMaxRadius={value:W||0},c),i(2,c.uPolarCellDividers={value:ie||0},c),i(2,c.uPolarSectionDividers={value:oe||0},c)),Z()}},[R,E,c,a,$,ne,v,s,h,m,_,S,A,l,g,k,P,y,T,O,H,F,V,W,ie,oe,t,C,le,n]}class Qt extends De{constructor(e){super(),Ge(this,e,At,Gt,Ie,{cellColor:8,sectionColor:9,cellSize:10,backgroundColor:11,backgroundOpacity:12,sectionSize:13,plane:14,gridSize:1,followCamera:15,infiniteGrid:16,fadeDistance:17,fadeStrength:18,cellThickness:19,sectionThickness:20,type:21,axis:22,maxRadius:23,cellDividers:24,sectionDividers:25,ref:0},null,[-1,-1])}}const se=new mt,Q=new p,te=new p,b=new N,Ze={X:new p(1,0,0),Y:new p(0,1,0),Z:new p(0,0,1)},xe={type:"change"},je={type:"mouseDown"},Fe={type:"mouseUp",mode:null},Re={type:"objectChange"};class Xt extends ke{constructor(e,i){super(),i===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),i=document),this.isTransformControls=!0,this.visible=!1,this.domElement=i,this.domElement.style.touchAction="none";const o=new Ft;this._gizmo=o,this.add(o);const s=new Rt;this._plane=s,this.add(s);const a=this;function t(y,T){let O=T;Object.defineProperty(a,y,{get:function(){return O!==void 0?O:T},set:function(H){O!==H&&(O=H,s[y]=H,o[y]=H,a.dispatchEvent({type:y+"-changed",value:H}),a.dispatchEvent(xe))}}),a[y]=T,s[y]=T,o[y]=T}t("camera",e),t("object",void 0),t("enabled",!0),t("axis",null),t("mode","translate"),t("translationSnap",null),t("rotationSnap",null),t("scaleSnap",null),t("space","world"),t("size",1),t("dragging",!1),t("showX",!0),t("showY",!0),t("showZ",!0);const n=new p,h=new p,m=new N,_=new N,S=new p,A=new N,l=new p,g=new p,E=new p,k=0,P=new p;t("worldPosition",n),t("worldPositionStart",h),t("worldQuaternion",m),t("worldQuaternionStart",_),t("cameraPosition",S),t("cameraQuaternion",A),t("pointStart",l),t("pointEnd",g),t("rotationAxis",E),t("rotationAngle",k),t("eye",P),this._offset=new p,this._startNorm=new p,this._endNorm=new p,this._cameraScale=new p,this._parentPosition=new p,this._parentQuaternion=new N,this._parentQuaternionInv=new N,this._parentScale=new p,this._worldScaleStart=new p,this._worldQuaternionInv=new N,this._worldScale=new p,this._positionStart=new p,this._quaternionStart=new N,this._scaleStart=new p,this._getPointer=Yt.bind(this),this._onPointerDown=Ht.bind(this),this._onPointerHover=Ot.bind(this),this._onPointerMove=Zt.bind(this),this._onPointerUp=jt.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;se.setFromCamera(e,this.camera);const i=Ee(this._gizmo.picker[this.mode],se);i?this.axis=i.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e.button!==0)&&this.axis!==null){se.setFromCamera(e,this.camera);const i=Ee(this._plane,se,!0);i&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(i.point).sub(this.worldPositionStart)),this.dragging=!0,je.mode=this.mode,this.dispatchEvent(je)}}pointerMove(e){const i=this.axis,o=this.mode,s=this.object;let a=this.space;if(o==="scale"?a="local":(i==="E"||i==="XYZE"||i==="XYZ")&&(a="world"),s===void 0||i===null||this.dragging===!1||e.button!==-1)return;se.setFromCamera(e,this.camera);const t=Ee(this._plane,se,!0);if(t){if(this.pointEnd.copy(t.point).sub(this.worldPositionStart),o==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),a==="local"&&i!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),i.indexOf("X")===-1&&(this._offset.x=0),i.indexOf("Y")===-1&&(this._offset.y=0),i.indexOf("Z")===-1&&(this._offset.z=0),a==="local"&&i!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),s.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(a==="local"&&(s.position.applyQuaternion(b.copy(this._quaternionStart).invert()),i.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),i.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),i.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.position.applyQuaternion(this._quaternionStart)),a==="world"&&(s.parent&&s.position.add(Q.setFromMatrixPosition(s.parent.matrixWorld)),i.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),i.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),i.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.parent&&s.position.sub(Q.setFromMatrixPosition(s.parent.matrixWorld))));else if(o==="scale"){if(i.search("XYZ")!==-1){let n=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(n*=-1),te.set(n,n,n)}else Q.copy(this.pointStart),te.copy(this.pointEnd),Q.applyQuaternion(this._worldQuaternionInv),te.applyQuaternion(this._worldQuaternionInv),te.divide(Q),i.search("X")===-1&&(te.x=1),i.search("Y")===-1&&(te.y=1),i.search("Z")===-1&&(te.z=1);s.scale.copy(this._scaleStart).multiply(te),this.scaleSnap&&(i.search("X")!==-1&&(s.scale.x=Math.round(s.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),i.search("Y")!==-1&&(s.scale.y=Math.round(s.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),i.search("Z")!==-1&&(s.scale.z=Math.round(s.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(o==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const n=20/this.worldPosition.distanceTo(Q.setFromMatrixPosition(this.camera.matrixWorld));let h=!1;i==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Q.copy(this.rotationAxis).cross(this.eye))*n):(i==="X"||i==="Y"||i==="Z")&&(this.rotationAxis.copy(Ze[i]),Q.copy(Ze[i]),a==="local"&&Q.applyQuaternion(this.worldQuaternion),Q.cross(this.eye),Q.length()===0?h=!0:this.rotationAngle=this._offset.dot(Q.normalize())*n),(i==="E"||h)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),a==="local"&&i!=="E"&&i!=="XYZE"?(s.quaternion.copy(this._quaternionStart),s.quaternion.multiply(b.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),s.quaternion.copy(b.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),s.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(xe),this.dispatchEvent(Re)}}pointerUp(e){e.button===0&&(this.dragging&&this.axis!==null&&(Fe.mode=this.mode,this.dispatchEvent(Fe)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(xe),this.dispatchEvent(Re),this.pointStart.copy(this.pointEnd))}getRaycaster(){return se}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}}function Yt(r){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:r.button};{const e=this.domElement.getBoundingClientRect();return{x:(r.clientX-e.left)/e.width*2-1,y:-(r.clientY-e.top)/e.height*2+1,button:r.button}}}function Ot(r){if(this.enabled)switch(r.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(r));break}}function Ht(r){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(r.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(r)),this.pointerDown(this._getPointer(r)))}function Zt(r){this.enabled&&this.pointerMove(this._getPointer(r))}function jt(r){this.enabled&&(this.domElement.releasePointerCapture(r.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(r)))}function Ee(r,e,i){const o=e.intersectObject(r,!0);for(let s=0;s<o.length;s++)if(o[s].object.visible||i)return o[s];return!1}const ye=new pt,w=new p(0,1,0),Le=new p(0,0,0),qe=new tt,be=new N,Pe=new N,B=new p,We=new tt,me=new p(1,0,0),ae=new p(0,1,0),pe=new p(0,0,1),Se=new p,fe=new p,de=new p;class Ft extends ke{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new it({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=new gt({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),o=e.clone();o.opacity=.15;const s=i.clone();s.opacity=.5;const a=e.clone();a.color.setHex(16711680);const t=e.clone();t.color.setHex(65280);const n=e.clone();n.color.setHex(255);const h=e.clone();h.color.setHex(16711680),h.opacity=.5;const m=e.clone();m.color.setHex(65280),m.opacity=.5;const _=e.clone();_.color.setHex(255),_.opacity=.5;const S=e.clone();S.opacity=.25;const A=e.clone();A.color.setHex(16776960),A.opacity=.25,e.clone().color.setHex(16776960);const g=e.clone();g.color.setHex(7895160);const E=new Y(0,.04,.1,12);E.translate(0,.05,0);const k=new X(.08,.08,.08);k.translate(0,.04,0);const P=new Ye;P.setAttribute("position",new Oe([0,0,0,1,0,0],3));const y=new Y(.0075,.0075,.5,3);y.translate(0,.25,0);function T(c,L){const d=new ue(c,.0075,3,64,L*Math.PI*2);return d.rotateY(Math.PI/2),d.rotateX(Math.PI/2),d}function O(){const c=new Ye;return c.setAttribute("position",new Oe([0,0,0,1,1,1],3)),c}const H={X:[[new f(E,a),[.5,0,0],[0,0,-Math.PI/2]],[new f(E,a),[-.5,0,0],[0,0,Math.PI/2]],[new f(y,a),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new f(E,t),[0,.5,0]],[new f(E,t),[0,-.5,0],[Math.PI,0,0]],[new f(y,t)]],Z:[[new f(E,n),[0,0,.5],[Math.PI/2,0,0]],[new f(E,n),[0,0,-.5],[-Math.PI/2,0,0]],[new f(y,n),null,[Math.PI/2,0,0]]],XYZ:[[new f(new we(.1,0),S.clone()),[0,0,0]]],XY:[[new f(new X(.15,.15,.01),_.clone()),[.15,.15,0]]],YZ:[[new f(new X(.15,.15,.01),h.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new f(new X(.15,.15,.01),m.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},F={X:[[new f(new Y(.2,0,.6,4),o),[.3,0,0],[0,0,-Math.PI/2]],[new f(new Y(.2,0,.6,4),o),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new f(new Y(.2,0,.6,4),o),[0,.3,0]],[new f(new Y(.2,0,.6,4),o),[0,-.3,0],[0,0,Math.PI]]],Z:[[new f(new Y(.2,0,.6,4),o),[0,0,.3],[Math.PI/2,0,0]],[new f(new Y(.2,0,.6,4),o),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new f(new we(.2,0),o)]],XY:[[new f(new X(.2,.2,.01),o),[.15,.15,0]]],YZ:[[new f(new X(.2,.2,.01),o),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new f(new X(.2,.2,.01),o),[.15,0,.15],[-Math.PI/2,0,0]]]},V={START:[[new f(new we(.01,2),s),null,null,null,"helper"]],END:[[new f(new we(.01,2),s),null,null,null,"helper"]],DELTA:[[new ee(O(),s),null,null,null,"helper"]],X:[[new ee(P,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new ee(P,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new ee(P,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},W={XYZE:[[new f(T(.5,1),g),null,[0,Math.PI/2,0]]],X:[[new f(T(.5,.5),a)]],Y:[[new f(T(.5,.5),t),null,[0,0,-Math.PI/2]]],Z:[[new f(T(.5,.5),n),null,[0,Math.PI/2,0]]],E:[[new f(T(.75,1),A),null,[0,Math.PI/2,0]]]},ie={AXIS:[[new ee(P,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},oe={XYZE:[[new f(new wt(.25,10,8),o)]],X:[[new f(new ue(.5,.1,4,24),o),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new f(new ue(.5,.1,4,24),o),[0,0,0],[Math.PI/2,0,0]]],Z:[[new f(new ue(.5,.1,4,24),o),[0,0,0],[0,0,-Math.PI/2]]],E:[[new f(new ue(.75,.1,2,24),o)]]},R={X:[[new f(k,a),[.5,0,0],[0,0,-Math.PI/2]],[new f(y,a),[0,0,0],[0,0,-Math.PI/2]],[new f(k,a),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new f(k,t),[0,.5,0]],[new f(y,t)],[new f(k,t),[0,-.5,0],[0,0,Math.PI]]],Z:[[new f(k,n),[0,0,.5],[Math.PI/2,0,0]],[new f(y,n),[0,0,0],[Math.PI/2,0,0]],[new f(k,n),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new f(new X(.15,.15,.01),_),[.15,.15,0]]],YZ:[[new f(new X(.15,.15,.01),h),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new f(new X(.15,.15,.01),m),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new f(new X(.1,.1,.1),S.clone())]]},$={X:[[new f(new Y(.2,0,.6,4),o),[.3,0,0],[0,0,-Math.PI/2]],[new f(new Y(.2,0,.6,4),o),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new f(new Y(.2,0,.6,4),o),[0,.3,0]],[new f(new Y(.2,0,.6,4),o),[0,-.3,0],[0,0,Math.PI]]],Z:[[new f(new Y(.2,0,.6,4),o),[0,0,.3],[Math.PI/2,0,0]],[new f(new Y(.2,0,.6,4),o),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new f(new X(.2,.2,.01),o),[.15,.15,0]]],YZ:[[new f(new X(.2,.2,.01),o),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new f(new X(.2,.2,.01),o),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new f(new X(.2,.2,.2),o),[0,0,0]]]},ne={X:[[new ee(P,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new ee(P,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new ee(P,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function Z(c){const L=new ke;for(const d in c)for(let v=c[d].length;v--;){const C=c[d][v][0].clone(),le=c[d][v][1],u=c[d][v][2],ce=c[d][v][3],Ce=c[d][v][4];C.name=d,C.tag=Ce,le&&C.position.set(le[0],le[1],le[2]),u&&C.rotation.set(u[0],u[1],u[2]),ce&&C.scale.set(ce[0],ce[1],ce[2]),C.updateMatrix();const ge=C.geometry.clone();ge.applyMatrix4(C.matrix),C.geometry=ge,C.renderOrder=1/0,C.position.set(0,0,0),C.rotation.set(0,0,0),C.scale.set(1,1,1),L.add(C)}return L}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=Z(H)),this.add(this.gizmo.rotate=Z(W)),this.add(this.gizmo.scale=Z(R)),this.add(this.picker.translate=Z(F)),this.add(this.picker.rotate=Z(oe)),this.add(this.picker.scale=Z($)),this.add(this.helper.translate=Z(V)),this.add(this.helper.rotate=Z(ie)),this.add(this.helper.scale=Z(ne)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const o=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:Pe;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let s=[];s=s.concat(this.picker[this.mode].children),s=s.concat(this.gizmo[this.mode].children),s=s.concat(this.helper[this.mode].children);for(let a=0;a<s.length;a++){const t=s[a];t.visible=!0,t.rotation.set(0,0,0),t.position.copy(this.worldPosition);let n;if(this.camera.isOrthographicCamera?n=(this.camera.top-this.camera.bottom)/this.camera.zoom:n=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),t.scale.set(1,1,1).multiplyScalar(n*this.size/4),t.tag==="helper"){t.visible=!1,t.name==="AXIS"?(t.visible=!!this.axis,this.axis==="X"&&(b.setFromEuler(ye.set(0,0,0)),t.quaternion.copy(o).multiply(b),Math.abs(w.copy(me).applyQuaternion(o).dot(this.eye))>.9&&(t.visible=!1)),this.axis==="Y"&&(b.setFromEuler(ye.set(0,0,Math.PI/2)),t.quaternion.copy(o).multiply(b),Math.abs(w.copy(ae).applyQuaternion(o).dot(this.eye))>.9&&(t.visible=!1)),this.axis==="Z"&&(b.setFromEuler(ye.set(0,Math.PI/2,0)),t.quaternion.copy(o).multiply(b),Math.abs(w.copy(pe).applyQuaternion(o).dot(this.eye))>.9&&(t.visible=!1)),this.axis==="XYZE"&&(b.setFromEuler(ye.set(0,Math.PI/2,0)),w.copy(this.rotationAxis),t.quaternion.setFromRotationMatrix(qe.lookAt(Le,w,ae)),t.quaternion.multiply(b),t.visible=this.dragging),this.axis==="E"&&(t.visible=!1)):t.name==="START"?(t.position.copy(this.worldPositionStart),t.visible=this.dragging):t.name==="END"?(t.position.copy(this.worldPosition),t.visible=this.dragging):t.name==="DELTA"?(t.position.copy(this.worldPositionStart),t.quaternion.copy(this.worldQuaternionStart),Q.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Q.applyQuaternion(this.worldQuaternionStart.clone().invert()),t.scale.copy(Q),t.visible=this.dragging):(t.quaternion.copy(o),this.dragging?t.position.copy(this.worldPositionStart):t.position.copy(this.worldPosition),this.axis&&(t.visible=this.axis.search(t.name)!==-1));continue}t.quaternion.copy(o),this.mode==="translate"||this.mode==="scale"?(t.name==="X"&&Math.abs(w.copy(me).applyQuaternion(o).dot(this.eye))>.99&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),t.name==="Y"&&Math.abs(w.copy(ae).applyQuaternion(o).dot(this.eye))>.99&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),t.name==="Z"&&Math.abs(w.copy(pe).applyQuaternion(o).dot(this.eye))>.99&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),t.name==="XY"&&Math.abs(w.copy(pe).applyQuaternion(o).dot(this.eye))<.2&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),t.name==="YZ"&&Math.abs(w.copy(me).applyQuaternion(o).dot(this.eye))<.2&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),t.name==="XZ"&&Math.abs(w.copy(ae).applyQuaternion(o).dot(this.eye))<.2&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1)):this.mode==="rotate"&&(be.copy(o),w.copy(this.eye).applyQuaternion(b.copy(o).invert()),t.name.search("E")!==-1&&t.quaternion.setFromRotationMatrix(qe.lookAt(this.eye,Le,ae)),t.name==="X"&&(b.setFromAxisAngle(me,Math.atan2(-w.y,w.z)),b.multiplyQuaternions(be,b),t.quaternion.copy(b)),t.name==="Y"&&(b.setFromAxisAngle(ae,Math.atan2(w.x,w.z)),b.multiplyQuaternions(be,b),t.quaternion.copy(b)),t.name==="Z"&&(b.setFromAxisAngle(pe,Math.atan2(w.y,w.x)),b.multiplyQuaternions(be,b),t.quaternion.copy(b))),t.visible=t.visible&&(t.name.indexOf("X")===-1||this.showX),t.visible=t.visible&&(t.name.indexOf("Y")===-1||this.showY),t.visible=t.visible&&(t.name.indexOf("Z")===-1||this.showZ),t.visible=t.visible&&(t.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),t.material._color=t.material._color||t.material.color.clone(),t.material._opacity=t.material._opacity||t.material.opacity,t.material.color.copy(t.material._color),t.material.opacity=t.material._opacity,this.enabled&&this.axis&&(t.name===this.axis||this.axis.split("").some(function(h){return t.name===h}))&&(t.material.color.setHex(16776960),t.material.opacity=1)}super.updateMatrixWorld(e)}}class Rt extends f{constructor(){super(new ot(1e5,1e5,2,2),new it({visible:!1,wireframe:!0,side:Xe,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let i=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(i="local"),Se.copy(me).applyQuaternion(i==="local"?this.worldQuaternion:Pe),fe.copy(ae).applyQuaternion(i==="local"?this.worldQuaternion:Pe),de.copy(pe).applyQuaternion(i==="local"?this.worldQuaternion:Pe),w.copy(fe),this.mode){case"translate":case"scale":switch(this.axis){case"X":w.copy(this.eye).cross(Se),B.copy(Se).cross(w);break;case"Y":w.copy(this.eye).cross(fe),B.copy(fe).cross(w);break;case"Z":w.copy(this.eye).cross(de),B.copy(de).cross(w);break;case"XY":B.copy(de);break;case"YZ":B.copy(Se);break;case"XZ":w.copy(de),B.copy(fe);break;case"XYZ":case"E":B.set(0,0,0);break}break;case"rotate":default:B.set(0,0,0)}B.length()===0?this.quaternion.copy(this.cameraQuaternion):(We.lookAt(Q.set(0,0,0),B,w),this.quaternion.setFromRotationMatrix(We)),super.updateMatrixWorld(e)}}const Lt=r=>({ref:r&536870912}),Be=r=>({ref:r[29]});function qt(r){let e,i;const o=[{is:r[1]},r[2]];let s={};for(let a=0;a<o.length;a+=1)s=re(s,o[a]);return e=new j({props:s}),r[15](e),e.$on("dragging-changed",r[7]),e.$on("change",r[5]),{c(){I(e.$$.fragment)},l(a){z(e.$$.fragment,a)},m(a,t){D(e,a,t),i=!0},p(a,t){const n=t&6?Ae(o,[t&2&&{is:a[1]},t&4&&Qe(a[2])]):{};e.$set(n)},i(a){i||(M(e.$$.fragment,a),i=!0)},o(a){x(e.$$.fragment,a),i=!1},d(a){r[15](null),G(e,a)}}}function Wt(r){let e;const i=r[14].default,o=Ue(i,r,r[18],Be);return{c(){o&&o.c()},l(s){o&&o.l(s)},m(s,a){o&&o.m(s,a),e=!0},p(s,a){o&&o.p&&(!e||a&537133056)&&Ve(o,i,s,s[18],e?Je(i,s[18],a,Lt):Ke(s[18]),Be)},i(s){e||(M(o,s),e=!0)},o(s){x(o,s),e=!1},d(s){o&&o.d(s)}}}function Bt(r){let e,i,o,s;e=new ut({props:{onChildMount:r[16],onChildDestroy:r[17],$$slots:{default:[qt]},$$scope:{ctx:r}}});const a=[{is:r[0]},r[3]];let t={$$slots:{default:[Wt,({ref:n})=>({29:n}),({ref:n})=>n?536870912:0]},$$scope:{ctx:r}};for(let n=0;n<a.length;n+=1)t=re(t,a[n]);return o=new j({props:t}),{c(){I(e.$$.fragment),i=K(),I(o.$$.fragment)},l(n){z(e.$$.fragment,n),i=J(n),z(o.$$.fragment,n)},m(n,h){D(e,n,h),U(n,i,h),D(o,n,h),s=!0},p(n,[h]){const m={};h&262166&&(m.$$scope={dirty:h,ctx:n}),e.$set(m);const _=h&9?Ae(a,[h&1&&{is:n[0]},h&8&&Qe(n[3])]):{};h&537133056&&(_.$$scope={dirty:h,ctx:n}),o.$set(_)},i(n){s||(M(e.$$.fragment,n),M(o.$$.fragment,n),s=!0)},o(n){x(e.$$.fragment,n),x(o.$$.fragment,n),s=!1},d(n){n&&q(i),G(e,n),G(o,n)}}}function Nt(r,e,i){const o=["autoPauseOrbitControls","autoPauseTrackballControls","object","group","controls"];let s=ve(e,o),a,t,{$$slots:n={},$$scope:h}=e,{autoPauseOrbitControls:m=!0}=e,{autoPauseTrackballControls:_=!0}=e,{object:S=void 0}=e;const{camera:A,renderer:l,invalidate:g,scene:E}=$e(),{orbitControls:k,trackballControls:P}=vt(),y=_e(!1),T=_e(m??!0),O=_e(_??!0),H=d=>{y.set(d.value)};Me([k,y,T],([d,v,C])=>{if(!(!d||!d.enabled&&v))return d.enabled=!(v&&C),()=>{d.enabled=!0}}),Me([P,y,O],([d,v,C])=>{if(!(!d||!d.enabled&&v))return d.enabled=!(v&&C),()=>{d.enabled=!0}});const F=new _t,V=Pt(A,d=>new Xt(d,l.domElement));Te(r,V,d=>i(1,a=d));let{controls:W=a}=e;const ie=_e(S??F);Me([V,ie],([d,v])=>(d.attach(v),()=>{d.detach()}));const oe=["enabled","axis","mode","translationSnap","rotationSnap","scaleSnap","space","size","showX","showY","showZ","visible"];let R={},$={};const ne=et();Te(r,ne,d=>i(4,t=d));function Z(d){ze[d?"unshift":"push"](()=>{t=d,ne.set(t)})}const c=d=>{E.add(d)},L=d=>{E.remove(d)};return r.$$set=d=>{e=re(re({},e),Ne(d)),i(28,s=ve(e,o)),"autoPauseOrbitControls"in d&&i(11,m=d.autoPauseOrbitControls),"autoPauseTrackballControls"in d&&i(12,_=d.autoPauseTrackballControls),"object"in d&&i(13,S=d.object),"controls"in d&&i(10,W=d.controls),"$$scope"in d&&i(18,h=d.$$scope)},r.$$.update=()=>{r.$$.dirty&2048&&T.set(m??!0),r.$$.dirty&4096&&O.set(_??!0),r.$$.dirty&2&&i(10,W=a);{i(2,R={}),i(3,$={});for(let[d,v]of Object.entries(s))oe.includes(d)?i(2,R[d]=v,R):i(3,$[d]=v,$)}},[F,a,R,$,t,g,E,H,V,ne,W,m,_,S,n,Z,c,L,h]}class Ut extends De{constructor(e){super(),Ge(this,e,Nt,Bt,Ie,{autoPauseOrbitControls:11,autoPauseTrackballControls:12,object:13,group:0,controls:10})}get group(){return this.$$.ctx[0]}}const Vt=Math.PI/180;function Kt(r){let e,i;return e=new Mt({props:{enableDamping:!0,autoRotate:!0}}),{c(){I(e.$$.fragment)},l(o){z(e.$$.fragment,o)},m(o,s){D(e,o,s),i=!0},p:st,i(o){i||(M(e.$$.fragment,o),i=!0)},o(o){x(e.$$.fragment,o),i=!1},d(o){G(e,o)}}}function Jt(r){let e,i;return e=new j.DirectionalLightHelper({props:{args:[r[4],1,"white"]}}),{c(){I(e.$$.fragment)},l(o){z(e.$$.fragment,o)},m(o,s){D(e,o,s),i=!0},p(o,s){const a={};s&16&&(a.args=[o[4],1,"white"]),e.$set(a)},i(o){i||(M(e.$$.fragment,o),i=!0)},o(o){x(e.$$.fragment,o),i=!1},d(o){G(e,o)}}}function $t(r){let e,i,o,s,a,t;return e=new j.SphereGeometry({props:{args:[5,64,64]}}),o=new j.MeshStandardMaterial({props:{color:"white"}}),a=new Ut({props:{object:r[4]}}),{c(){I(e.$$.fragment),i=K(),I(o.$$.fragment),s=K(),I(a.$$.fragment)},l(n){z(e.$$.fragment,n),i=J(n),z(o.$$.fragment,n),s=J(n),z(a.$$.fragment,n)},m(n,h){D(e,n,h),U(n,i,h),D(o,n,h),U(n,s,h),D(a,n,h),t=!0},p(n,h){const m={};h&16&&(m.object=n[4]),a.$set(m)},i(n){t||(M(e.$$.fragment,n),M(o.$$.fragment,n),M(a.$$.fragment,n),t=!0)},o(n){x(e.$$.fragment,n),x(o.$$.fragment,n),x(a.$$.fragment,n),t=!1},d(n){n&&(q(i),q(s)),G(e,n),G(o,n),G(a,n)}}}function ei(r){let e,i,o,s,a,t,n,h,m,_,S,A;return e=new Qt({props:{cellColor:"#808080",sectionSize:0}}),o=new j.PerspectiveCamera({props:{makeDefault:!0,position:[20,20,20],fov:50,$$slots:{default:[Kt,({ref:l})=>({4:l}),({ref:l})=>l?16:0]},$$scope:{ctx:r}}}),a=new j.AmbientLight({props:{color:"white",intensity:1}}),n=new j.DirectionalLight({props:{color:"white",intensity:10,position:[30,50,0],"shadow.camera.top":9,castShadow:!0,$$slots:{default:[Jt,({ref:l})=>({4:l}),({ref:l})=>l?16:0]},$$scope:{ctx:r}}}),m=new j.Mesh({props:{position:r[0],receiveShadow:!0,castShadow:!0,$$slots:{default:[$t,({ref:l})=>({4:l}),({ref:l})=>l?16:0]},$$scope:{ctx:r}}}),S=new j.Mesh({props:{geometry:new ot(20,20),material:new St({color:"white",side:Xe}),rotation:[Vt*90,0,0],receiveShadow:!0}}),{c(){I(e.$$.fragment),i=K(),I(o.$$.fragment),s=K(),I(a.$$.fragment),t=K(),I(n.$$.fragment),h=K(),I(m.$$.fragment),_=K(),I(S.$$.fragment)},l(l){z(e.$$.fragment,l),i=J(l),z(o.$$.fragment,l),s=J(l),z(a.$$.fragment,l),t=J(l),z(n.$$.fragment,l),h=J(l),z(m.$$.fragment,l),_=J(l),z(S.$$.fragment,l)},m(l,g){D(e,l,g),U(l,i,g),D(o,l,g),U(l,s,g),D(a,l,g),U(l,t,g),D(n,l,g),U(l,h,g),D(m,l,g),U(l,_,g),D(S,l,g),A=!0},p(l,g){const E={};g&32&&(E.$$scope={dirty:g,ctx:l}),o.$set(E);const k={};g&48&&(k.$$scope={dirty:g,ctx:l}),n.$set(k);const P={};g&1&&(P.position=l[0]),g&48&&(P.$$scope={dirty:g,ctx:l}),m.$set(P)},i(l){A||(M(e.$$.fragment,l),M(o.$$.fragment,l),M(a.$$.fragment,l),M(n.$$.fragment,l),M(m.$$.fragment,l),M(S.$$.fragment,l),A=!0)},o(l){x(e.$$.fragment,l),x(o.$$.fragment,l),x(a.$$.fragment,l),x(n.$$.fragment,l),x(m.$$.fragment,l),x(S.$$.fragment,l),A=!1},d(l){l&&(q(i),q(s),q(t),q(h),q(_)),G(e,l),G(o,l),G(a,l),G(n,l),G(m,l),G(S,l)}}}function ti(r){let e,i,o;return i=new ft({props:{$$slots:{default:[ei]},$$scope:{ctx:r}}}),{c(){e=rt("div"),I(i.$$.fragment),this.h()},l(s){e=lt(s,"DIV",{class:!0});var a=ct(e);z(i.$$.fragment,a),a.forEach(q),this.h()},h(){ht(e,"class","scene absolute w-full h-full inset-0 svelte-1g7yaxd")},m(s,a){U(s,e,a),D(i,e,null),o=!0},p(s,[a]){const t={};a&33&&(t.$$scope={dirty:a,ctx:s}),i.$set(t)},i(s){o||(M(i.$$.fragment,s),o=!0)},o(s){x(i.$$.fragment,s),o=!1},d(s){s&&q(e),G(i)}}}function ii(r={x:0,y:0,z:0}){return[...Object.values(r)]}function oi(r,e,i){let o;new yt(20,20),new bt(10);const s={position:{x:0,y:5,z:0}};return new Ct({title:"Scene"}).addFolder({title:"Sphere"}).addBinding(s,"position").on("change",({value:a})=>{i(1,s.position=a,s)}),r.$$.update=()=>{r.$$.dirty&2&&i(0,o=ii(s.position))},[o,s]}class hi extends De{constructor(e){super(),Ge(this,e,oi,ti,Ie,{})}}export{hi as component};
