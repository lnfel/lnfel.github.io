import{t as P,s as H,q as A,v as W,c as R,x as v,h as B,j as E,u as O,k as L,l as S,n as I}from"../chunks/scheduler.DgBL_1-D.js";import{S as K,i as M,u as k,v as p,w,r as g,p as $,x as j,s as J,b as Q,j as U,d as V}from"../chunks/index.CO7fLiMo.js";import{c as X,d as z,w as T,b as Y,T as N,f as Z,C as x}from"../chunks/fragment.DHIgtpVd.js";import{h as ee,u as te}from"../chunks/await_block.DvxpKOn9.js";import{g as re,a as se}from"../chunks/spread.CgU5AtxT.js";import{aj as ne,W as ae}from"../chunks/three.module.CvVa4e-M.js";import{w as C,d as ce}from"../chunks/index.fZ9uAEAS.js";import{G as le}from"../chunks/GLTFLoader.ChyF0Veo.js";const y=r=>{const t=C(void 0),a=C(void 0);return r.then(e=>{t.set(e)}).catch(e=>{console.error("Error in asyncWritable:",e.message),a.set(e)}),Object.assign(Object.assign(r,t),{error:a,promise:r})};function oe(r,t){const{remember:a,clear:e}=X();let s;const n=()=>{var c;const o=new r(...(t==null?void 0:t.args)??[]);return(c=t==null?void 0:t.extend)==null||c.call(t,o),o};return{load:(o,c)=>{const u=async _=>{var d;if(s||(s=n()),"loadAsync"in s){const i=await s.loadAsync(_,c==null?void 0:c.onProgress);return((d=c==null?void 0:c.transform)==null?void 0:d.call(c,i))??i}else return new Promise((i,m)=>{s.load(_,b=>{var h;return i(((h=c==null?void 0:c.transform)==null?void 0:h.call(c,b))??b)},b=>{var h;return(h=c==null?void 0:c.onProgress)==null?void 0:h.call(c,b)},m)})};if(Array.isArray(o)){const _=o.map(i=>a(()=>u(i),[r,i]));return y(Promise.all(_))}else if(typeof o=="string"){const _=a(()=>u(o),[r,o]);return y(_)}else{const _=Object.values(o).map(i=>a(()=>u(i),[r,i]));return y(Promise.all(_).then(i=>Object.fromEntries(Object.entries(o).map(([m],b)=>[m,i[b]]))))}},clear:o=>{Array.isArray(o)?o.forEach(c=>{e([r,c])}):typeof o=="string"?e([r,o]):Object.entries(o).forEach(([c,u])=>{e([r,c,u])})},loader:s}}const q=r=>!!(r!=null&&r.isObject3D),fe=r=>!!(r!=null&&r.subscribe)&&typeof r.subscribe=="function";function ie(r,t){const a=fe(r)?r:C(void 0),e=z(q(r)?r:q(t)?t:void 0),s=ce([e,a],([c,u])=>c??(u==null?void 0:u.scene)),n=z({}),l=new ne(void 0);T([a,s],async([c,u])=>{if(!c||!c.animations.length||!u)return;await P();const _=c.animations.reduce((d,i)=>{const m=l.clipAction(i,u);return{...d,[i.name]:m}},{});return n.set(_),()=>{Object.values(_).forEach(d=>{const i=d;i.stop(),l.uncacheClip(i.getClip())})}});const{start:f,stop:o}=Y(c=>{l.update(c)},{autoStart:!1});return T(n,c=>{Object.keys(c).length?f():o()}),{gltf:a,root:e,mixer:l,actions:n}}const ue=r=>({}),G=r=>({ref:r[0]}),me=r=>({}),D=r=>({error:r[10]}),_e=r=>({}),F=r=>({});function de(r){let t;const a=r[7].error,e=E(a,r,r[9],D);return{c(){e&&e.c()},l(s){e&&e.l(s)},m(s,n){e&&e.m(s,n),t=!0},p(s,n){e&&e.p&&(!t||n&512)&&O(e,a,s,s[9],t?S(a,s[9],n,me):L(s[9]),D)},i(s){t||(g(e,s),t=!0)},o(s){$(e,s),t=!1},d(s){e&&e.d(s)}}}function ge(r){let t,a;return t=new N({props:{is:r[4].scene}}),{c(){k(t.$$.fragment)},l(e){p(t.$$.fragment,e)},m(e,s){w(t,e,s),a=!0},p:I,i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){$(t.$$.fragment,e),a=!1},d(e){j(t,e)}}}function $e(r){let t;const a=r[7].fallback,e=E(a,r,r[9],F);return{c(){e&&e.c()},l(s){e&&e.l(s)},m(s,n){e&&e.m(s,n),t=!0},p(s,n){e&&e.p&&(!t||n&512)&&O(e,a,s,s[9],t?S(a,s[9],n,_e):L(s[9]),F)},i(s){t||(g(e,s),t=!0)},o(s){$(e,s),t=!1},d(s){e&&e.d(s)}}}function be(r){let t,a,e={ctx:r,current:null,token:null,hasCatch:!0,pending:$e,then:ge,catch:de,value:4,error:10,blocks:[,,,]};ee(r[4],e);const s=r[7].default,n=E(s,r,r[9],G);return{c(){e.block.c(),t=J(),n&&n.c()},l(l){e.block.l(l),t=Q(l),n&&n.l(l)},m(l,f){e.block.m(l,e.anchor=f),e.mount=()=>t.parentNode,e.anchor=t,U(l,t,f),n&&n.m(l,f),a=!0},p(l,f){r=l,te(e,r,f),n&&n.p&&(!a||f&512)&&O(n,s,r,r[9],a?S(s,r[9],f,ue):L(r[9]),G)},i(l){a||(g(e.block),g(n,l),a=!0)},o(l){for(let f=0;f<3;f+=1){const o=e.blocks[f];$(o)}$(n,l),a=!1},d(l){l&&V(t),e.block.d(l),e.token=null,e=null,n&&n.d(l)}}}function he(r){let t,a;const e=[{is:r[0]},{dispose:!1},r[3]];let s={$$slots:{default:[be]},$$scope:{ctx:r}};for(let n=0;n<e.length;n+=1)s=A(s,e[n]);return t=new N({props:s}),r[8](t),{c(){k(t.$$.fragment)},l(n){p(t.$$.fragment,n)},m(n,l){w(t,n,l),a=!0},p(n,[l]){const f=l&9?re(e,[l&1&&{is:n[0]},e[1],l&8&&se(n[3])]):{};l&512&&(f.$$scope={dirty:l,ctx:n}),t.$set(f)},i(n){a||(g(t.$$.fragment,n),a=!0)},o(n){$(t.$$.fragment,n),a=!1},d(n){r[8](null),j(t,n)}}}function ke(r,t,a){const e=["ref","actions","mixer"];let s=W(t,e),n,{$$slots:l={},$$scope:f}=t;const o=new ae,c=oe(le).load("/models/your-name/model.gltf"),{actions:u,mixer:_}=ie(c,o),d=Z();R(r,d,m=>a(1,n=m));function i(m){B[m?"unshift":"push"](()=>{n=m,d.set(n)})}return r.$$set=m=>{t=A(A({},t),v(m)),a(3,s=W(t,e)),"$$scope"in m&&a(9,f=m.$$scope)},[o,n,d,s,c,u,_,l,i,f]}class pe extends K{constructor(t){super(),M(this,t,ke,he,H,{ref:0,actions:5,mixer:6})}get ref(){return this.$$.ctx[0]}get actions(){return this.$$.ctx[5]}get mixer(){return this.$$.ctx[6]}}function we(r){let t,a;return t=new pe({props:{position:[0,0,0],scale:.05}}),{c(){k(t.$$.fragment)},l(e){p(t.$$.fragment,e)},m(e,s){w(t,e,s),a=!0},p:I,i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){$(t.$$.fragment,e),a=!1},d(e){j(t,e)}}}function je(r){let t,a;return t=new x({props:{size:{width:500,height:500},$$slots:{default:[we]},$$scope:{ctx:r}}}),{c(){k(t.$$.fragment)},l(e){p(t.$$.fragment,e)},m(e,s){w(t,e,s),a=!0},p(e,[s]){const n={};s&1&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){a||(g(t.$$.fragment,e),a=!0)},o(e){$(t.$$.fragment,e),a=!1},d(e){j(t,e)}}}class ze extends K{constructor(t){super(),M(this,t,null,je,H,{})}}export{ze as component};
