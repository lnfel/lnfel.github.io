import{W as P,S as D,i as F,s as H,_ as A,L as p,t as g,a as $,M as k,N as w,O as y,a0 as S,w as R,a1 as Z,c as L,d as B,u as O,g as E,b as z,f as J,m as Q,r as U,Z as V,n as I}from"../chunks/xk3pEXYh.js";import"../chunks/IHki7fMi.js";import{c as X,d as W,w as T,b as Y,T as K,f as v,C as x}from"../chunks/BE0wAo_P.js";import{h as ee,u as te}from"../chunks/CQ-N9KAv.js";import{g as re,a as se}from"../chunks/CgU5AtxT.js";import{aj as ne,a0 as ae}from"../chunks/BWs5EcuF.js";import{w as C,d as ce}from"../chunks/py_jMq1I.js";import{G as oe}from"../chunks/zREXuIlX.js";const j=r=>{const t=C(void 0),a=C(void 0);return r.then(e=>{t.set(e)}).catch(e=>{console.error("Error in asyncWritable:",e.message),a.set(e)}),Object.assign(Object.assign(r,t),{error:a,promise:r})};function le(r,t){const{remember:a,clear:e}=X();let s;const n=()=>new r;return{load:(l,c)=>{const u=async _=>{var d;if(s||(s=n()),"loadAsync"in s){const f=await s.loadAsync(_,c==null?void 0:c.onProgress);return((d=c==null?void 0:c.transform)==null?void 0:d.call(c,f))??f}else return new Promise((f,m)=>{s.load(_,b=>{var h;return f(((h=c==null?void 0:c.transform)==null?void 0:h.call(c,b))??b)},b=>{var h;return(h=c==null?void 0:c.onProgress)==null?void 0:h.call(c,b)},m)})};if(Array.isArray(l)){const _=l.map(f=>a(()=>u(f),[r,f]));return j(Promise.all(_))}else if(typeof l=="string"){const _=a(()=>u(l),[r,l]);return j(_)}else{const _=Object.values(l).map(f=>a(()=>u(f),[r,f]));return j(Promise.all(_).then(f=>Object.fromEntries(Object.entries(l).map(([m],b)=>[m,f[b]]))))}},clear:l=>{Array.isArray(l)?l.forEach(c=>{e([r,c])}):typeof l=="string"?e([r,l]):Object.entries(l).forEach(([c,u])=>{e([r,c,u])})},loader:s}}const G=r=>!!(r!=null&&r.isObject3D),ie=r=>!!(r!=null&&r.subscribe)&&typeof r.subscribe=="function";function fe(r,t){const a=ie(r)?r:C(void 0),e=W(G(r)?r:G(t)?t:void 0),s=ce([e,a],([c,u])=>c??(u==null?void 0:u.scene)),n=W({}),o=new ne(void 0);T([a,s],async([c,u])=>{if(!c||!c.animations.length||!u)return;await P();const _=c.animations.reduce((d,f)=>{const m=o.clipAction(f,u);return{...d,[f.name]:m}},{});return n.set(_),()=>{Object.values(_).forEach(d=>{const f=d;f.stop(),o.uncacheClip(f.getClip())})}});const{start:i,stop:l}=Y(c=>{o.update(c)},{autoStart:!1});return T(n,c=>{Object.keys(c).length?i():l()}),{gltf:a,root:e,mixer:o,actions:n}}const ue=r=>({}),M=r=>({ref:r[0]}),me=r=>({}),N=r=>({error:r[10]}),_e=r=>({}),q=r=>({});function de(r){let t;const a=r[7].error,e=L(a,r,r[9],N);return{c(){e&&e.c()},l(s){e&&e.l(s)},m(s,n){e&&e.m(s,n),t=!0},p(s,n){e&&e.p&&(!t||n&512)&&O(e,a,s,s[9],t?z(a,s[9],n,me):E(s[9]),N)},i(s){t||($(e,s),t=!0)},o(s){g(e,s),t=!1},d(s){e&&e.d(s)}}}function ge(r){let t,a;return t=new K({props:{is:r[4].scene}}),{c(){y(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,s){k(t,e,s),a=!0},p:I,i(e){a||($(t.$$.fragment,e),a=!0)},o(e){g(t.$$.fragment,e),a=!1},d(e){p(t,e)}}}function $e(r){let t;const a=r[7].fallback,e=L(a,r,r[9],q);return{c(){e&&e.c()},l(s){e&&e.l(s)},m(s,n){e&&e.m(s,n),t=!0},p(s,n){e&&e.p&&(!t||n&512)&&O(e,a,s,s[9],t?z(a,s[9],n,_e):E(s[9]),q)},i(s){t||($(e,s),t=!0)},o(s){g(e,s),t=!1},d(s){e&&e.d(s)}}}function be(r){let t,a,e={ctx:r,current:null,token:null,hasCatch:!0,pending:$e,then:ge,catch:de,value:4,error:10,blocks:[,,,]};ee(r[4],e);const s=r[7].default,n=L(s,r,r[9],M);return{c(){e.block.c(),t=U(),n&&n.c()},l(o){e.block.l(o),t=Q(o),n&&n.l(o)},m(o,i){e.block.m(o,e.anchor=i),e.mount=()=>t.parentNode,e.anchor=t,J(o,t,i),n&&n.m(o,i),a=!0},p(o,i){r=o,te(e,r,i),n&&n.p&&(!a||i&512)&&O(n,s,r,r[9],a?z(s,r[9],i,ue):E(r[9]),M)},i(o){a||($(e.block),$(n,o),a=!0)},o(o){for(let i=0;i<3;i+=1){const l=e.blocks[i];g(l)}g(n,o),a=!1},d(o){o&&B(t),e.block.d(o),e.token=null,e=null,n&&n.d(o)}}}function he(r){let t,a;const e=[{is:r[0]},{dispose:!1},r[3]];let s={$$slots:{default:[be]},$$scope:{ctx:r}};for(let n=0;n<e.length;n+=1)s=A(s,e[n]);return t=new K({props:s}),r[8](t),{c(){y(t.$$.fragment)},l(n){w(t.$$.fragment,n)},m(n,o){k(t,n,o),a=!0},p(n,[o]){const i=o&9?re(e,[o&1&&{is:n[0]},e[1],o&8&&se(n[3])]):{};o&512&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){a||($(t.$$.fragment,n),a=!0)},o(n){g(t.$$.fragment,n),a=!1},d(n){r[8](null),p(t,n)}}}function pe(r,t,a){const e=["ref","actions","mixer"];let s=S(t,e),n,{$$slots:o={},$$scope:i}=t;const l=new ae,c=le(oe).load("/models/your-name/model.gltf"),{actions:u,mixer:_}=fe(c,l),d=v();R(r,d,m=>a(1,n=m));function f(m){V[m?"unshift":"push"](()=>{n=m,d.set(n)})}return r.$$set=m=>{t=A(A({},t),Z(m)),a(3,s=S(t,e)),"$$scope"in m&&a(9,i=m.$$scope)},[l,n,d,s,c,u,_,o,f,i]}class ke extends D{constructor(t){super(),F(this,t,pe,he,H,{ref:0,actions:5,mixer:6})}get ref(){return this.$$.ctx[0]}get actions(){return this.$$.ctx[5]}get mixer(){return this.$$.ctx[6]}}function we(r){let t,a;return t=new ke({props:{position:[0,0,0],scale:.05}}),{c(){y(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,s){k(t,e,s),a=!0},p:I,i(e){a||($(t.$$.fragment,e),a=!0)},o(e){g(t.$$.fragment,e),a=!1},d(e){p(t,e)}}}function ye(r){let t,a;return t=new x({props:{size:{width:500,height:500},$$slots:{default:[we]},$$scope:{ctx:r}}}),{c(){y(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,s){k(t,e,s),a=!0},p(e,[s]){const n={};s&1&&(n.$$scope={dirty:s,ctx:e}),t.$set(n)},i(e){a||($(t.$$.fragment,e),a=!0)},o(e){g(t.$$.fragment,e),a=!1},d(e){p(t,e)}}}class We extends D{constructor(t){super(),F(this,t,null,ye,H,{})}}export{We as component};
